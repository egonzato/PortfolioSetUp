---
import Layout from "@/layouts/Layout.astro";
import { publications } from "@/data/cv";

function extractHref(html: string) {
  const match = html.match(/href="([^"]+)"/);
  return match ? match[1] : "#";
}

const ALL_PAPERS = publications;
---

<Layout title="Papers | Elia Gonzato">
  <div class="prose max-w-none">
    <h1 class="text-3xl text-blue-900 font-bold mb-8">Publications</h1>

    <div class="space-y-8">
      {
        ALL_PAPERS.map((paper) => (
          <div class="card bg-base-200">
            <div class="card-body">
              <h2 class="card-title text-xl">
                <p class="text-blue-900">
                  {paper.title}
                </p>
              </h2>
              <p class="text-sm text-blue-900 text-base-content/80">{paper.abstract}</p>
              <div class="card-actions justify-end mt-4">
                <a 
                  href={extractHref(paper.contentHtml)}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="btn btn-sm bg-blue-900 border border-blue-900 text-white hover:bg-white hover:text-blue-900 transition duration-300 ease-in-out"
                >
                  Read Paper
                </a>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</Layout>
